Протокол Trunk:

Терминология:
- точка: описание внешнего сайта, к которому идёт подключение. Точка задаётся числовым номером (идентификатором).
- клиент: часть, которая принимает пользовательские подключения и передаёт данные на сервер;
- сервер: часть, которая принимает данные от клиента и передаёт данные на клиент. Также сервер общается с сайтами.

При появлении локального tcp-подключения от пользователя клиент генерирует идентификатор этого подключения (uuid) и определяет идентификатор точки (каким-то образом, например, через локальные ip-адреса). Клиент передаёт на сервер сообщение о создании подключения, идентификатор точки и типовой таймаут для ответа. Клиент повторяет передачу сообщения о создании подключения через задаваемый интервал, пока с сервера не придёт либо подтверждение на создание либо отказ (запрос на закрытие).

Когда клиент получает данные по пользовательскому соединению, он нарезает их на отдельные пакеты-чанки и отправляет по udp на сервер. Каждый пакет помечается порядковым номером (PacketIndex), начиная с 0. Каждый пакет через типовой таймаут повторно посылается на сервер до тех пор, пока не придёт подтверждение от сервера или сообщение о закрытии соединения.
